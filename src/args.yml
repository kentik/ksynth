name: ksynth

global_settings:
  - DeriveDisplayOrder

settings:
  - DisableHelpSubcommand
  - SubcommandRequiredElseHelp
  - VersionlessSubcommands

help_message: print help
version_message: print version

args:
  - verbose:
      short: v
      long: verbose
      help: verbose output
      multiple: true
      global: true
  - bind:
      long: bind
      help: bind address
      takes_value: true
      multiple: true
      number_of_values: 1
      global: true
  - ip4:
      short: "4"
      help: use IPv4 only
      conflicts_with: ip6
      global: true
  - ip6:
      short: "6"
      help: use IPv6 only
      conflicts_with: ip4
      global: true

subcommands:
  - agent:
      about: execute agent
      help_message: print help
      args:
        - id:
            short: i
            long: id
            env: AGENT_IDENTITY
            help: agent ID
            takes_value: true
            required: true
        - name:
            short: n
            long: name
            env: AGENT_NAME
            help: agent name
            takes_value: true
        - global:
            long: global
            env: AGENT_GLOBAL
            help: global agent
            takes_value: false
        - config:
            long: config
            help: config file
            takes_value: true
            hidden: true
        - company:
            long: company
            env: KENTIK_COMPANY
            help: company ID
            takes_value: true
        - site:
            long: site
            env: KENTIK_SITE
            help: site ID
            takes_value: true
        - proxy:
            long: proxy
            env: PROXY
            help: HTTP proxy
            takes_value: true
        - region:
            long: region
            env: KENTIK_REGION
            help: region
            takes_value: true
            default_value: "US"
        - user:
            long: user
            help: run as user
            takes_value: true
        - update:
            long: update
            env: AGENT_UPDATE
            help: enable updates
            takes_value: false
        - rc:
            long: rc
            help: accept RCs
            takes_value: false
            hidden: true
        - output:
            short: o
            long: output
            help: output format
            takes_value: true
            hidden: true
  - knock:
      about: execute knock
      help_message: print help
      args:
        - count:
            short: c
            help: count
            value_name: count
            default_value: "4"
        - delay:
            short: d
            help: delay (ms)
            default_value: "100"
        - expiry:
            short: e
            help: expiry (ms)
            default_value: "250"
        - port:
            short: p
            help: port
            takes_value: true
        - host:
            index: 1
            help: host
            multiple: true
            required: true
  - ping:
      about: execute ping
      help_message: print help
      args:
        - count:
            short: c
            help: count
            value_name: count
            default_value: "4"
        - delay:
            short: d
            help: delay (ms)
            default_value: "100"
        - expiry:
            short: e
            help: expiry (ms)
            default_value: "250"
        - host:
            index: 1
            help: host
            multiple: true
            required: true
  - trace:
      about: execute trace
      help_message: print help
      args:
        - delay:
            short: d
            help: delay (ms)
            default_value: "50"
        - expiry:
            short: e
            help: expiry (ms)
            default_value: "250"
        - limit:
            short: l
            help: hop limit
            default_value: "32"
        - probes:
            short: p
            help: probe count
            value_name: probes
            default_value: "3"
        - tcp:
            long: tcp
            help: use TCP probes
            value_name: port
            conflicts_with: icmp
        - icmp:
            long: icmp
            help: use ICMP probes
            conflicts_with: tcp
        - host:
            index: 1
            help: host
            multiple: true
            required: true
